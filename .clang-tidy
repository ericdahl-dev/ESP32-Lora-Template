# Clang-Tidy configuration for Lightning Detection System
# Comprehensive static analysis for C++ code quality

Checks: >
  modernize-use-using,
  modernize-deprecated-headers,
  misc-const-correctness

# Header filter for our source code only (exclude third-party libraries)
HeaderFilterRegex: '^src/.*\.(h|hpp)$'

# Analysis options
AnalyzeTemporaryDtors: false
FormatStyle: file
User: lightning-detection-system

# Check options
CheckOptions:
  # Naming conventions
  - key: readability-identifier-naming.NamespaceCase
    value: PascalCase
  - key: readability-identifier-naming.TypedefCase
    value: PascalCase
  - key: readability-identifier-naming.TypeAliasCase
    value: PascalCase
  - key: readability-identifier-naming.ClassCase
    value: PascalCase
  - key: readability-identifier-naming.StructCase
    value: PascalCase
  - key: readability-identifier-naming.EnumCase
    value: PascalCase
  - key: readability-identifier-naming.FunctionCase
    value: camelBack
  - key: readability-identifier-naming.VariableCase
    value: camelBack
  - key: readability-identifier-naming.ParameterCase
    value: camelBack
  - key: readability-identifier-naming.MemberCase
    value: camelBack
  - key: readability-identifier-naming.PrivateMemberSuffix
    value: '_'
  - key: readability-identifier-naming.ConstantCase
    value: camelBack
  - key: readability-identifier-naming.EnumConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.GlobalConstantCase
    value: UPPER_CASE
  - key: readability-identifier-naming.MacroDefinitionCase
    value: UPPER_CASE

  # Function length and complexity
  - key: readability-function-size.LineThreshold
    value: 100
  - key: readability-function-size.StatementThreshold
    value: 50
  - key: readability-function-size.BranchThreshold
    value: 20
  - key: readability-function-size.ParameterThreshold
    value: 8

  # Line length
  - key: readability-line-length.LineLength
    value: 120

  # Miscellaneous
  - key: modernize-loop-convert.MaxCopySize
    value: 16
  - key: modernize-loop-convert.MinConfidence
    value: reasonable
  - key: modernize-use-nullptr.NullMacros
    value: 'NULL'
  - key: performance-for-range-copy.WarnOnAllAutoCopies
    value: true
  - key: performance-move-const-arg.CheckTriviallyCopyableMove
    value: false

  # Arduino/ESP32 specific settings
  - key: cppcoreguidelines-avoid-goto.IgnoreMacros
    value: true
  - key: cert-err34-c.CheckCalls
    value: 'scanf,sscanf,fscanf'
